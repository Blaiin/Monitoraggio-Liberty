<div class="container-fluid">
  <app-navbar></app-navbar>
  <div class="row">
    <div class="col-12">
      <h1 class="title">Elenco configurazioni</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <table
        mat-table
        [dataSource]="dataSource"
        matSort
        class="mat-elevation-z8"
      >
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Nome</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <!-- Stato Column -->
        <ng-container matColumnDef="stato">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Stato</th>
          <td mat-cell *matCellDef="let element">{{ element.stato }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <mat-paginator
        [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <button mat-flat-button color="primary" (click)="toggleNew()" class="new">
        Nuova configurazione <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>
  <div class="row" *ngIf="new">
    <div class="col-12">
      <h1 class="title">Aggiunta di una nuova configurazione</h1>
    </div>

    <div class="col-12">
      <form [formGroup]="configurazioneForm" (ngSubmit)="onSubmit()">
        <h3>Soglie</h3>
        <div class="row" formGroupName="soglie">
          <div class="form-group col-md-3">
            <label for="soglia1">Soglia 1</label>
            <input
              type="text"
              id="soglia1"
              formControlName="soglia1"
              class="form-control"
              placeholder="Inserisci soglia 1"
            />
            <mat-error
              *ngIf="
                configurazioneForm.get('soglie.soglia1')?.hasError('required')
              "
            >
              Il campo Soglia 1 è obbligatorio.
            </mat-error>
          </div>
          <div class="form-group col-md-3">
            <label for="soglia2">Soglia 2</label>
            <input
              type="text"
              id="soglia2"
              formControlName="soglia2"
              class="form-control"
              placeholder="Inserisci soglia 2"
            />
            <mat-error
              *ngIf="
                configurazioneForm.get('soglie.soglia2')?.hasError('required')
              "
            >
              Il campo Soglia 2 è obbligatorio.
            </mat-error>
          </div>
          <div class="form-group col-md-3">
            <label for="soglia3">Soglia 3</label>
            <input
              type="text"
              id="soglia3"
              formControlName="soglia3"
              class="form-control"
              placeholder="Inserisci soglia 3"
            />
            <mat-error
              *ngIf="
                configurazioneForm.get('soglie.soglia3')?.hasError('required')
              "
            >
              Il campo Soglia 3 è obbligatorio.
            </mat-error>
          </div>
          <div class="form-group col-md-3">
            <button mat-flat-button color="primary">
              Test SQL
            </button>
          </div>
        </div>

        <h3 class="mt-4">Azioni</h3>
        <div class="row" formGroupName="azioni">
          <div class="form-group col-md-3">
            <label for="azione1">Azione 1</label>
            <input
              type="text"
              id="azione1"
              formControlName="azione1"
              class="form-control"
              placeholder="Inserisci azione 1"
            />
            <mat-error
              *ngIf="
                configurazioneForm.get('azioni.azione1')?.hasError('required')
              "
            >
              Il campo Azione 1 è obbligatorio.
            </mat-error>
          </div>
          <div class="form-group col-md-3">
            <label for="azione2">Azione 2</label>
            <input
              type="text"
              id="azione2"
              formControlName="azione2"
              class="form-control"
              placeholder="Inserisci azione 2"
            />
            <mat-error
              *ngIf="
                configurazioneForm.get('azioni.azione2')?.hasError('required')
              "
            >
              Il campo Azione 2 è obbligatorio.
            </mat-error>
          </div>
          <div class="form-group col-md-3">
            <label for="azione3">Azione 3</label>
            <input
              type="text"
              id="azione3"
              formControlName="azione3"
              class="form-control"
              placeholder="Inserisci azione 3"
            />
            <mat-error
              *ngIf="
                configurazioneForm.get('azioni.azione3')?.hasError('required')
              "
            >
              Il campo Azione 3 è obbligatorio.
            </mat-error>
          </div>
        </div>

        <button
          type="submit"
          class="btn btn-primary mt-4"
          [disabled]="!configurazioneForm.valid"
        >
          Salva
        </button>
      </form>
    </div>
  </div>
</div>
